<apex:page standardController="Contact" extensions="VFCtrl_AVSContactSuggestion" action="{!CallAVS}" id="thePage">
    <html>
    <head>
        <Title></Title>
    </head>
    <style type="text/css">
        .empty-column-content {
            display: none;
        }
        .show-column-content {
            display: block;
        }
        .Bold {
            font-weight: bold;
        }
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/start/jquery-ui.css" type="text/css" media="all" />
    <apex:form id="theForm">
        <apex:pageMessages id="msg" />
        <apex:pageBlock id="ContInfoblock">
            <apex:pageBlockButtons location="bottom">
                <apex:commandButton value="{!$Label.AVS_Button_GetSuggestion}" action="{!CallAVS}" status="status" id="getButton" reRender="theForm" rendered="{!renderEditMode}" />
                <!--this button render when edit orignal clicked -->
                <!-- <apex:commandButton value="Continue with address as entered" action="{!doCancel}" immediate="true"/>-->
            </apex:pageBlockButtons>
            <apex:pageBlockSection title="{!$Label.AVS_PageHeader_ContactInformation}" collapsible="false" id="conBrnchSec" rendered="{!NOT(renderEditMode)}">
                <apex:outputField value="{!ContactObj.Account.Name}" label="{!$Label.AVS_Field_Account}" />
                <apex:outputField value="{!ContactObj.Name}" label="{!$Label.AVS_Field_Contact}" />
                <apex:outputField value="{!ContactObj.MailingStreet}" label="{!$Label.AVS_Field_MailingStreet}" id="mailStreet" />
                <apex:outputField value="{!ContactObj.MailingCity}" label="{!$Label.AVS_Field_MailingCity}" id="mailCity" />
                <apex:outputField value="{!ContactObj.MailingState}" label="{!$Label.AVS_Field_MailingState_Provience}" id="mailState" />
                <apex:outputField value="{!ContactObj.MailingPostalCode}" label="{!$Label.AVS_Field_MailingZip_PostalCode}" id="mailZip" />
                <apex:outputField value="{!ContactObj.MailingCountry}" label="{!$Label.AVS_Field_MailingCountry}" id="mailCountry" />
            </apex:pageBlockSection>

            <apex:pageBlockSection columns="2" title="{!$Label.AVS_PageHeader_ContactInformation}" collapsible="false" id="conBrnchSecEditMode" rendered="{!renderEditMode}">
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$Label.AVS_Field_Account}" />
                    <apex:outputField value="{!ContactObj.Account.Name}" id="contAccount" label="{!$Label.AVS_Field_Account}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$Label.AVS_Field_Contact}" />
                    <apex:outputField value="{!ContactObj.Name}" id="contName" label="{!$Label.AVS_Field_Contact}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$Label.AVS_Field_MailingStreet}" />
                    <apex:inputTextarea value="{!MailingStreet}" label="{!$Label.AVS_Field_MailingStreet}" id="o_mailStreet" style="resize:none; width:250px; height:40px; overflow:visible" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$Label.AVS_Field_MailingCity}" />
                    <apex:inputText value="{!MailingCity}" label="{!$Label.AVS_Field_MailingCity}" id="o_mailCity" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="" rendered="{!IF(MailingStreet == null && MailingCountry!='JP',true,false)}" />
                    <apex:outputLabel style="font-weight:bold;color:red;" value="{!$Label.AVSPage_Error1}" rendered="{!IF(MailingStreet == null && MailingCountry!='JP',true,false)}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="" rendered="{!IF(MailingStreet == null && MailingCountry!='JP',true,false)}" />
                    <apex:outputLabel value="" rendered="{!IF(MailingStreet == null && MailingCountry!='JP',true,false)}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$Label.AVS_Field_MailingState_Provience}" />
                    <apex:inputText value="{!MailingState}" label="{!$Label.AVS_Field_MailingState_Provience}" id="o_mailState" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$Label.AVS_Field_MailingZip_PostalCode}" />
                    <apex:inputText value="{!MailingPostalCode}" label="{!$Label.AVS_Field_MailingZip_PostalCode}" id="o_mailZip" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="" rendered="{!IF(MailingPostalCode == null,true,false)}" />
                    <apex:outputLabel value="" rendered="{!IF(MailingPostalCode == null,true,false)}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="" rendered="{!IF(MailingPostalCode == null,true,false)}" />
                    <apex:outputLabel style="font-weight:bold;color:red;" value="{!$Label.AVSPage_Error1}" rendered="{!IF(MailingPostalCode == null,true,false)}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$Label.AVS_Field_MailingCountry}" />
                    <apex:selectList label="{!$Label.AVS_Field_MailingCountry}" value="{!MailingCountry}" size="1">
                        <apex:selectOptions value="{!items}" />
                    </apex:selectList>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="" rendered="{!IF(MailingCountry == null,true,false)}" />
                    <apex:outputLabel value="" rendered="{!IF(MailingCountry == null,true,false)}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="" rendered="{!IF(MailingCountry == null,true,false)}" />
                    <apex:outputLabel style="font-weight:bold;color:red;" value="{!$Label.AVSPage_Error1}" rendered="{!IF(MailingCountry == null,true,false)}" />
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
        </apex:pageBlock>

        <apex:pageBlock id="AVSblock">
            <apex:pageBlockButtons location="both" id="selectButton" onclick="showSection()">
                <apex:commandButton title="{!$Label.AVS_Button_Save}" value="{!$Label.AVS_Button_Save}" rendered="{!showButton}" action="{!selectSuggestions}" />
                <apex:commandButton value="{!$Label.AVS_Button_EditOriginalAddress}" title="{!$Label.AVS_Button_EditOriginalAddress}" action="{!toggleEditMode}" immediate="true" />
                <apex:commandButton value="{!$Label.AVS_Button_UseOriginalAddress}" title="{!$Label.AVS_Button_UseOriginalAddress}" action="{!doCancel}" immediate="true" />
            </apex:pageBlockButtons>

            <apex:pageBlockSection title="{!$Label.AVS_PageHeader_AVSAddressSuggestion}" collapsible="false" id="AVSBrnchSec" columns="1">
                <apex:outputPanel id="out" styleclass="Bold">
                    <apex:actionstatus id="status" startText="Validating with AVS..." styleclass="Bold">
                        <apex:facet name="stop">
                            <!-- <apex:outputLabel style="color:red" styleclass="Bold" value="ERROR: AVS cannot verify address as entered. Please double check address and resubmit" rendered="{!IF(resultSuggestionCount =='0' && resultCountry != null && resultStatusDesc != 'Assigned Address' ,true,false)}"></apex:outputLabel> -->
                            <apex:outputLabel style="color:red" styleclass="Bold" value="{!$Label.AVS_Error4}" rendered="{!IF(resultSuggestionCount =='0' && resultCountry != null && resultStatusDesc != 'Assigned Address' ,true,false)}"></apex:outputLabel>
                           
                        </apex:facet>
                    </apex:actionstatus>
                </apex:outputPanel>
                <!--<apex:outputText style="font-weight:bold;color:red;"  value="Click [Edit Original Address] button and update with valid unit/street number" rendered="{!IF(lstSuggestion.size>1,true,false)}"/>-->
                <!--<apex:outputText style="font-weight:bold;color:red;" value="{!$Label.AVS_MessageClickEdit}" rendered="{!IF(resultSuggestionCount !='0' && resultCountry != null,true,false)}" />-->

                <!--Start of Table if AVS provide suggestion -->
                <!--Table if AVS provide suggestion for NON China n Japan Start  -->
                <!--Table for drill down -->
                <!--<apex:pageBlockTable value="{!lstSuggestion}" var="sug" id="tbl" rendered="{!IF(lstSuggestion.size>1,true,false)}"> -->
                <apex:pageBlockTable value="{!lstSuggestion}" var="sug" id="tbl" rendered="{!IF(resultSuggestionCount !='0' && (resultCountry != 'Japan' && resultCountry != 'China' && resultCountry != null),true,false)}">
                    <!--Non China & Japan || Suggestion Select column-->
                    <apex:column headerValue="{!$Label.AVS_Field_Select}">
                        <apex:inputCheckbox value="{!sug.selected}" onclick="deselectOther(this); refineSearch(this, '{!sug.PRIMARY_NUMBER_LOW}', '{!sug.PRIMARY_NUMBER_HIGH}', {!showAptNo}, '{!TRIM(sug.UNIT_NUMBER_LOW)}', '{!TRIM(sug.UNIT_NUMBER_HIGH)}',{!showFloorNumber}, '{!sug.FLOOR_NUMBER_HIGH}', '{!sug.FLOOR_NUMBER_LOW}');">
                        </apex:inputCheckbox>
                    </apex:column>
                    <!-- Non China & Japan || Suggestion Street No column -->
                    <apex:column headerValue="{!$Label.AVS_Field_StreetNo}">
                        <apex:outputPanel rendered="{!IF(sug.PRIMARY_NUMBER_LOW!=sug.PRIMARY_NUMBER_HIGH,true,false)}">
                            <apex:outputText value="{!sug.PRIMARY_NUMBER_LOW}" />-
                            <apex:outputText value="{!sug.PRIMARY_NUMBER_HIGH}" />
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(sug.PRIMARY_NUMBER_LOW==sug.PRIMARY_NUMBER_HIGH,true,false)}">
                            <apex:outputText value="{!sug.PRIMARY_NUMBER_LOW}" />
                        </apex:outputPanel>
                    </apex:column>
                    <!--Non China & Japan || Suggestion Apt/Suite No column-->
                    <apex:column headerValue="{!$Label.AVS_Field_Apt_SuiteNo}" rendered="{!showAptNo}">
                        <apex:outputPanel rendered="{!IF(sug.UNIT_NUMBER_LOW!=sug.UNIT_NUMBER_HIGH,true,false)}">
                            <apex:outputText value="{!sug.UNIT_NUMBER_LOW}" />-
                            <apex:outputText value="{!sug.UNIT_NUMBER_HIGH}" />
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(sug.UNIT_NUMBER_LOW==sug.UNIT_NUMBER_HIGH,true,false)}">
                            <apex:outputText value="{!sug.UNIT_NUMBER_LOW}" />
                        </apex:outputPanel>
                    </apex:column>
                    <!-- Start - CR-10844 -->
                    <!--Non China & Japan || Suggestion Floor Number column-->
                    <apex:column headerValue="{!$Label.AVS_Field_Floor_No}" rendered="{!showFloorNumber}">
                        <apex:outputPanel rendered="{!IF(sug.FLOOR_NUMBER_LOW!=sug.FLOOR_NUMBER_HIGH,true,false)}">
                            <apex:outputText value="{!sug.FLOOR_NUMBER_LOW}"/>-
                            <apex:outputText value="{!sug.FLOOR_NUMBER_HIGH}"/>
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(sug.FLOOR_NUMBER_LOW==sug.FLOOR_NUMBER_HIGH,true,false)}">
                            <apex:outputText value="{!sug.FLOOR_DESCRIPTION} {!sug.FLOOR_NUMBER_LOW}"/>
                        </apex:outputPanel>
                    </apex:column>
                    <!-- End - CR-10844 -->
                    <!--CRQ 1088 -->
                    <!-- <apex:column headerValue="{!$Label.AVS_Page_BuildingName}" rendered="{!IF( resultBuilding != null || resultCountry == 'France',true,false)}"> -->
                    <apex:column headerValue="{!$Label.AVS_Page_BuildingName}" rendered="{!showFranceBuilding}">
                        <apex:outputlabel value="{!resultBuilding}" />
                    </apex:column>
                    <!-- Non China & Japan || Suggestion Mailing Street column -->
                    <apex:column headerValue="{!$Label.AVS_Field_MailingStreet}">
                        <apex:outputlabel value="{!sug.PRIMARY_NAME1} {!sug.PRIMARY_TYPE1} {!sug.PRIMARY_POSTFIX1}" />
                    </apex:column>
                    <!--CRQ 1087-->
                    
                    <!-- <apex:column headerValue="{!$Label.AVS_Field_Locality}" rendered="{!IF(sug.LOCALITY2 != null || resultCountry == 'United Kingdom',true,false)}"> -->
                    <apex:column headerValue="{!$Label.AVS_Field_Locality}" rendered="{!showLocality2}">
                        <apex:outputlabel value="{!sug.LOCALITY2}" />
                    </apex:column>
                    <!-- Non China & Japan || Suggestion Mailing City column -->
                    <apex:column headerValue="{!$Label.AVS_Field_MailingCity}">
                        <apex:outputlabel value="{!sug.LOCALITY1}" />
                    </apex:column>
                    <!-- Non China & Japan || Suggestion Mailing State/Province column -->
                    <apex:column headerValue="{!$Label.AVS_Field_MailingState_Provience}" rendered="{!showMailingState}">
                        <!-- Non China & Japan || Suggestion Region column -->
                        <apex:outputPanel rendered="{!IF(sug.REGION1 != null,true,false)}">
                            <apex:outputText value="{!sug.REGION1}" />
                        </apex:outputPanel>
                    </apex:column>
                    <!-- Non China & Japan || Suggestion Zip/Postal Code column -->
                    <apex:column headerValue="{!$Label.AVS_Field_MailingZip_PostalCode}">
                        <apex:outputPanel rendered="{!IF(sug.POSTCODE!=sug.POSTCODE2_EVEN && sug.POSTCODE2_EVEN != null ,true,false)}">
                            <apex:outputText value="{!sug.POSTCODE}" />-
                            <apex:outputText value="{!sug.POSTCODE2_EVEN}" />
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(sug.POSTCODE2_EVEN == null && sug.POSTCODE!=sug.POSTCODE2_ODD && sug.POSTCODE2_ODD != null ,true,false)}">
                            <apex:outputText value="{!sug.POSTCODE}" />-
                            <apex:outputText value="{!sug.POSTCODE2_ODD}" />
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(sug.POSTCODE==null,true,false)}">
                            <apex:outputText value="{!sug.POSTCODE1}" />
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(sug.POSTCODE2_EVEN==null && sug.POSTCODE2_ODD == null ,true,false)}">
                            <apex:outputText value="{!sug.POSTCODE}" />
                        </apex:outputPanel>
                    </apex:column>
                    <!-- Non China & Japan || Suggestion Mailing Country column -->
                    <apex:column headerValue="{!$Label.AVS_Field_MailingCountry}">
                        <apex:outputlabel value="{!resultCountry}" />
                    </apex:column>
                </apex:pageBlockTable>
                <!--End of Table if AVS provide suggestion for NON China n Japan -->

                           
                <!--Start of Table if AVS provide suggestion for Japan & China -->
                <apex:pageBlockTable value="{!lstSuggestion}" var="sug" id="tbl5" rendered="{!IF(resultSuggestionCount !='0' && resultCountry != null && (resultCountry == 'Japan' || resultCountry == 'China'),true,false)}">
                    <apex:column headerValue="{!$Label.AVS_Field_Select}">
                        <apex:inputCheckbox value="{!sug.selected}" onclick="deselectOther(this); refineSearch(this, '{!sug.PRIMARY_NUMBER_LOW}', '{!sug.PRIMARY_NUMBER_HIGH}', {!showAptNo}, '{!TRIM(sug.UNIT_NUMBER_LOW)}', '{!TRIM(sug.UNIT_NUMBER_HIGH)}',{!showFloorNumber}, '{!sug.FLOOR_NUMBER_HIGH}', '{!sug.FLOOR_NUMBER_LOW}');">
                        </apex:inputCheckbox>
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingStreet}">
                        <apex:outputlabel value="{!mailStreetJapan}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_StreetNo}" rendered="{!showStreetNo}">
                        <apex:outputPanel rendered="{!IF(sug.PRIMARY_NUMBER_LOW!=sug.PRIMARY_NUMBER_HIGH,true,false)}">
                            <apex:outputText value="{!sug.PRIMARY_NUMBER_LOW}" />-
                            <apex:outputText value="{!sug.PRIMARY_NUMBER_HIGH} {!sug.PRIMARY_NUMBER_DESCRIPTION}" />
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(sug.PRIMARY_NUMBER_LOW==sug.PRIMARY_NUMBER_HIGH,true,false)}">
                            <apex:outputText value="{!sug.PRIMARY_NUMBER_LOW} {!sug.PRIMARY_NUMBER_DESCRIPTION}" />
                        </apex:outputPanel>
                    </apex:column>
                    <!-- Start CRQ1089 -->
                    <apex:column headerValue="{!$Label.AVS_Page_BuildingName}" rendered="{!IF(resultCountry == 'Japan',true,false)}">
                        <apex:outputPanel rendered="{!IF(sug.FLOOR_NUMBER_LOW!=sug.FLOOR_NUMBER_HIGH,true,false)}">
                            <!-- <apex:outputText value="{!sug.building_name} {!sug.FLOOR_NUMBER_LOW}" />- -->
                            <apex:outputText value="{!resultBuilding} {!sug.FLOOR_NUMBER_LOW}" />-
                            <apex:outputText value="{!sug.FLOOR_NUMBER_HIGH}" />
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(sug.FLOOR_NUMBER_LOW==sug.FLOOR_NUMBER_HIGH,true,false)}">
                            <!-- <apex:outputText value="{!sug.building_name} {!sug.FLOOR_NUMBER_LOW}" /> -->
                            <apex:outputText value="{!resultBuilding} {!sug.FLOOR_NUMBER_LOW}" />
                        </apex:outputPanel>
                    </apex:column>
                        <!-- <apex:outputlabel value="{!sug.building_name}" rendered="{!IF(resultCountry == 'China',true,false)}" /> -->
                    <apex:column headerValue="{!$Label.AVS_Page_BuildingName}" rendered="{!IF(resultCountry == 'China',true,false)}">
                        <apex:outputlabel value="{!resultBuilding}"/>
                    </apex:column>
                    <!-- End CRQ1089 -->
                    <apex:column headerValue="{!$Label.AVS_Field_Apt_SuiteNo}" rendered="{!showAptNo}">
                        <apex:outputPanel rendered="{!IF(sug.UNIT_NUMBER_LOW!=sug.UNIT_NUMBER_HIGH,true,false)}">
                            <apex:outputText value="{!sug.UNIT_NUMBER_LOW}" />-
                            <apex:outputText value="{!sug.UNIT_NUMBER_HIGH}" />
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(sug.UNIT_NUMBER_LOW==sug.UNIT_NUMBER_HIGH,true,false)}">
                            <apex:outputText value="{!sug.UNIT_NUMBER_LOW}" />
                        </apex:outputPanel>
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingCity}">
                        <apex:outputlabel value="{!sug.LOCALITY1}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingState_Provience}" rendered="{!showMailingState}">
                        <apex:outputlabel value="{!sug.REGION1}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingZip_PostalCode}">
                        <apex:outputlabel value="{!sug.POSTCODE}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingCountry}">
                        <apex:outputlabel value="{!resultCountry}" />
                    </apex:column>
                </apex:pageBlockTable>
                <!--End of Table if AVS provide suggestion for Japan & China -->
                
                <!--End of Table if AVS provide suggestion -->

                <!--Start of Table if status = assigned address -->
                <!--Start of Table for Non China n Japan -->
                <apex:pageBlockTable value="{!lstSuggestion}" var="sug" id="tbl2" rendered="{!IF(resultStatusDesc == 'Assigned Address' && resultCountry != null && (resultCountry != 'Japan' && resultCountry != 'China'),true,false)}">
                    <apex:column headerValue="{!$Label.AVS_Field_Select}">
                        <apex:inputCheckbox value="{!sug.selected}" onclick="deselectOther(this)" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_StreetNo}">
                        <apex:outputText value="{!resultStreetNo}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_Apt_SuiteNo}" rendered="{!IF(resultUnitNum != null || resultUnitNum != '',true,false)}">
                        <apex:outputText value="{!resultUnitNum}" />
                    </apex:column>
                    <!--Start- CR -10844 -->
                    <apex:column headerValue="{!$Label.AVS_Field_Floor_No}"  rendered="{!showFloorNumber}">
                        <apex:outputText value="{!buildAusFloorNumber}" />                       
                    </apex:column>
                    <!-- End -CR-10844-->
                    <!--CRQ 1088 -->
                    <!-- <apex:column headerValue="{!$Label.AVS_Page_BuildingName}" rendered="{!IF(resultBuilding != null || resultCountry == 'France',true,false)}"> -->
                    <apex:column headerValue="{!$Label.AVS_Page_BuildingName}" rendered="{!showFranceBuilding}">
                        <apex:outputlabel value="{!resultBuilding}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingStreet}">
                        <apex:outputlabel value="{!resultStreet}" /> 
                    </apex:column>
                   <!-- <apex:column headerValue="{!$Label.AVS_Field_MailingStreet}" rendered="{IF(resultCountry != 'Australia',true,false)}">
                        <apex:outputlabel value="{!resultStreet}" /> 
                    </apex:column> -->
                    <!--CRQ 1087-->
                    <apex:column headerValue="{!$Label.AVS_Field_Locality}" rendered="{!showLocality2}">
                    <!-- <apex:column headerValue="{!$Label.AVS_Field_Locality}" rendered="{!IF(resultCountry == 'United Kingdom',true,false)}"> -->
                        <apex:outputlabel value="{!resultLocality2}" />
                    </apex:column>                  
                    <apex:column headerValue="{!$Label.AVS_Field_MailingCity}">
                        <apex:outputlabel value="{!resultCity}" />
                    </apex:column>
                    <!--<apex:column headerValue="{!$Label.AVS_Field_MailingState_Provience}" rendered="{!IF(resultState != null || resultState != '',true,false)}">
                        <apex:outputlabel value="{!resultState}" />
                    </apex:column>-->
                    <apex:column headerValue="{!$Label.AVS_Field_MailingState_Provience}" rendered="{!showMailingState}">
                        <!-- <apex:outputPanel rendered="{!IF(resultState != null || resultState != '',true,false)}"> -->
                            <apex:outputlabel value="{!resultState}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingZip_PostalCode}">
                        <apex:outputlabel value="{!resultPostalCode}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingCountry}">
                        <apex:outputlabel value="{!resultCountry}" />
                    </apex:column>
                </apex:pageBlockTable>
                <!--End of Table if AVS return suggestion for China n Japan  -->
                
                <!--Start of Table assigned address for China n Japan  -->
               <apex:pageBlockTable value="{!lstSuggestion}" var="sug" id="tbl3" 
                    rendered="{!IF(resultStatusDesc == 'Assigned Address' && resultCountry != null && (resultCountry == 'Japan'|| resultCountry == 'China'),true,false)}">                   
                    <apex:column headerValue="{!$Label.AVS_Field_Select}">
                        <apex:inputCheckbox value="{!sug.selected}" onclick="deselectOther(this)" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingStreet}">
                        <apex:outputPanel rendered="{!IF(resultCountry == 'Japan' ,true,false)}">
                            <apex:outputText value="{!resLoc2Loc3}" />
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(resultCountry == 'China' ,true,false)}">
                            <apex:outputText value="{!resLoc2Loc3China}" />
                        </apex:outputPanel>
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_StreetNo}">
                        <apex:outputPanel rendered="{!IF(resultCountry == 'Japan',true,false)}">
                            <apex:outputText value="{!resJapanSt}" />
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(resultCountry == 'China',true,false)}">
                            <apex:outputText value="{!resultStreetNo}" />
                        </apex:outputPanel>
                    </apex:column>
                    
                    <!-- start CRQ1089 -->
                    <apex:column headerValue="{!$Label.AVS_Page_BuildingName}">
                        <apex:outputPanel rendered="{!IF(resultCountry == 'Japan',true,false)}">
                            <apex:outputText value="{!buildNameJapan}" />
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!IF(resultCountry == 'China',true,false)}">
                            <apex:outputText value="{!buildNameChina}" />
                        </apex:outputPanel>
                    </apex:column>
                    <!-- End CRQ1089 -->
                                        
                    <apex:column headerValue="{!$Label.AVS_Field_Apt_SuiteNo}" rendered="{!IF(resultUnitNum != null || resultUnitNum != '',true,false)}">
                        <apex:outputText value="{!resultUnitNum}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingCity}">
                        <apex:outputlabel value="{!resultCity}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingState_Provience}" rendered="{!IF(resultState != null || resultState != '',true,false)}">
                        <apex:outputlabel value="{!resultState}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingZip_PostalCode}">
                        <apex:outputlabel value="{!resultPostalCode}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.AVS_Field_MailingCountry}">
                        <apex:outputlabel value="{!resultCountry}" />
                    </apex:column>
                </apex:pageBlockTable>
                <!--End of Table assigned address for China n Japan  -->
            </apex:pageBlockSection>
        </apex:pageBlock>
        
        <!-- CRQ 1043 Start -->
        <div id="divRefreshSearch" style="display: none;">
                <span id="spanLabel"> </span> &nbsp;&nbsp;
            <apex:inputText id="itAptOrSuiteNumber" />
            <script> var searchTag = document.getElementById("{!$Component.itAptOrSuiteNumber}"); </script>
        </div>
                <apex:actionFunction name="callSearch" action="{!refineSearch}" rerender="AVSblock, divRefreshSearch" status="status">
                        <apex:param name="pAptOrSuiteNumber" value="" assignTo="{!aptOrSuiteNumber}" />
                </apex:actionFunction>
                
<script language ="javascript">
            var selectedChkbox;
            var tableIdCount = 0;
                        
            function deselectOther(chkBox) {
                if(chkBox.checked) {
                    if((chkBox != selectedChkbox) && (selectedChkbox != null)) {
                        selectedChkbox.checked = false;
                    }
                    selectedChkbox = chkBox;
                }
            }
            
            function refineSearch(chkBox, lowStreet, highStreet, showApt, lowUnit, highUnit,showfloorNo, FNH, FNL) {
                if(chkBox.checked) {
                        
                         if(showApt && lowUnit != highUnit) {
                                            <!-- jQuery("#spanLabel").html("Please enter Apt/Suite #"); -->
                                            jQuery("#spanLabel").html('{!$Label.AVS_DrillDown_Apt}');
                                            showPopup();                                                
                                    }
                                    else if(showfloorNo==false && lowStreet != highStreet) {
                            <!-- jQuery("#spanLabel").html("Please enter Street No"); -->
                            jQuery("#spanLabel").html('{!$Label.AVS_DrillDown_Street}');
                            showPopup();                                
                                    }
                                    else if(showfloorNo==false &&lowStreet == highStreet) {
                                            callSearch(highStreet);                                                
                                    }
                                    else if(showApt && (lowUnit == highUnit)&& showfloorNo==false) {
                                            callSearch(highUnit);                                                
                                    }                                        
                                                                                 
                         if(showfloorNo){
                            if(FNL!= FNH){
                            jQuery("#spanLabel").html('{!$Label.AVS_DrillDown_Floor_Number}');
                                showPopup();                                 
                            } 
                            else if(FNH== FNL){
                            callSearch(FNH);                            
                            }                      
                        }                
                }
            }
            
            
            function showPopup() {
                jQuery("#divRefreshSearch").dialog({
                                        modal: true,
                                        width: 500,
                                        buttons: {
                                                Ok: function() {
                                                        if(searchTag.value != '') {
                                                                callSearch(searchTag.value);
                                                                searchTag.value = '';
                                                                jQuery(this).dialog("close");
                                                        }
                                                }
                                        }
                                });
            }
                        
            function showSection() {
                //alert('{!$Component.UpdateMailing}');
                document.getElementById('{!$Component.UpdateMailing}').style.visibility = 'visible';
            }
                        
            function hideSection() {
                //alert('{!$Component.UpdateMailing}');
                document.getElementById('{!$Component.UpdateMailing}').style.visibility = "hidden";
            }
        </script>
                
        <!-- CRQ 1043 Start -->
        <apex:outputPanel id="myStatus" styleclass="Bold">
            <apex:actionstatus id="statusSelect" startText="Processing..." styleclass="Bold">
                <apex:facet name="stop">
                </apex:facet>
            </apex:actionstatus>
        </apex:outputPanel>
    </apex:form>
    </html>
</apex:page>